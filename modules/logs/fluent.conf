[SERVICE]
    Log_Level         trace
    Parsers_File      /fluent-bit/parsers/parsers.conf

[FILTER]
    Name      parser
    Parser    json
    Match     *
    Key_Name  log
    Reserve_Data On

[FILTER]
    Name nest
    Match *
    Operation lift
    Nested_Under log

[OUTPUT]
    Name              cloudwatch_logs
    Match             *
    region            eu-central-1
    log_group_name    /ecs/harvester
    log_stream_prefix harvester-${VERSION}/

[OUTPUT]
    Name              kinesis_firehose
    Match             *
    region            eu-central-1
    delivery_stream   harvester_logs_to_es
    time_key          time
    time_key_format   %Y-%m-%dT%H:%M:%S%z
